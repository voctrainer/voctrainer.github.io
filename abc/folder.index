# üéµ –ù–æ—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

showInNavigation: true

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é —Ü–µ—Ä–∫–æ–≤–Ω—ã—Ö –ø–µ—Å–Ω–æ–ø–µ–Ω–∏–π. –ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω—ã –ø–∞—Ä—Ç–∏—Ç—É—Ä—ã –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞—Å–ø–µ–≤–∞—Ö –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ö–æ—Ä–æ–≤–æ–≥–æ –ø–µ–Ω–∏—è.

## –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è

1. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –∏–∑ —Å–ø–∏—Å–∫–∞ —Å–ª–µ–≤–∞
2. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω—É–∂–Ω—É—é –ø–∞—Ä—Ç–∏—Ç—É—Ä—É
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–ª–µ–µ—Ä –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è
4. –ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –ø–µ–Ω–∏–µ —Å –∞–∫–∫–æ–º–ø–∞–Ω–µ–º–µ–Ω—Ç–æ–º

## üìÇ –ü–æ–ª–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –ø–∞—Ä—Ç–∏—Ç—É—Ä
<div id="full-partiture-tree">
    <div style="color: #7f8c8d; font-style: italic; padding: 20px; text-align: center;">
        –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞...
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    loadFullTree();
});

async function loadFullTree() {
    try {
        const response = await fetch('./full-tree.json'); // <-- –í–æ—Ç —Ç—É—Ç –ø—Ä–æ–±–ª–µ–º–∞!
        if (!response.ok) throw new Error('Full tree file not found');

        const treeData = await response.json();
        renderFullTree(treeData);

    } catch (error) {
        console.error('Error loading full tree:', error);
        document.getElementById('full-partiture-tree').innerHTML =
            '<div style="color: #e74c3c; font-style: italic; padding: 10px 20px;">‚ùå –ü–æ–ª–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω<br><small>' + error.message + '</small></div>';
    }
}

function renderFullTree(treeData) {
    const container = document.getElementById('full-partiture-tree');

    if (!treeData || treeData.length === 0) {
        container.innerHTML = '<div style="color: #7f8c8d; font-style: italic; padding: 10px 20px;">–ü–∞–ø–∫–∞ –ø—É—Å—Ç–∞</div>';
        return;
    }

    let html = '<ul style="list-style: none; padding-left: 0; margin: 0;">';

    function renderItems(items, level = 0) {
        items.forEach(item => {
            // –ü–†–û–ë–õ–ï–ú–ê: –°–∫—Ä–∏–ø—Ç –æ–∂–∏–¥–∞–µ—Ç –ø–æ–ª—è item.path –∏ item.displayName
            // convert-abc.js –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JSON —Å –ø–æ–ª—è–º–∏ id, text, icon, children
            const path = item.path; // <-- undefined
            const displayName = item.displayName; // <-- undefined
            const type = item.type; // <-- undefined

            // –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
            const id = item.id; // –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å
            const text = item.text; // –≠—Ç–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫
            const children = item.children;

            // –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, id - —ç—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –æ—Ç /partitures/
            // –¢–æ–≥–¥–∞ –¥–ª—è —Å—Å—ã–ª–∫–∏ –Ω—É–∂–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL
            // –î–ª—è —Ñ–∞–π–ª–æ–≤: /partitures/.../filename.html
            // –î–ª—è –ø–∞–ø–æ–∫: /partitures/.../ (–∏–ª–∏ /partitures/.../index.html, —á—Ç–æ Jekyll –¥–µ–ª–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
            let linkPath = id;
            if (!linkPath.endsWith('.html')) {
                // –ï—Å–ª–∏ —ç—Ç–æ –ø–∞–ø–∫–∞, Jekyll —Å–æ–∑–¥–∞—Å—Ç /partitures/.../index.html -> /partitures/.../
                // –ù–æ fetch –∏–¥—ë—Ç –∑–∞ /partitures/full-tree.json, –∫–æ—Ç–æ—Ä—ã–π –ª–µ–∂–∏—Ç –≤ –∫–æ—Ä–Ω–µ partitures/
                // –ü–æ—ç—Ç–æ–º—É, –µ—Å–ª–∏ id = 'liturgy', —Å—Å—ã–ª–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å '/partitures/liturgy/'
                // –ï—Å–ª–∏ id = 'liturgy/liturgy_of_the_faithful', —Å—Å—ã–ª–∫–∞ '/partitures/liturgy/liturgy_of_the_faithful/'
                // –ò—Ç–∞–∫, –µ—Å–ª–∏ id –ù–ï –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ .html, —ç—Ç–æ –ø–∞–ø–∫–∞, –∏ –ø—É—Ç—å –¥–ª—è —Å—Å—ã–ª–∫–∏ - '/partitures/' + id + '/'
                linkPath = '/partitures/' + id + '/';
            } else {
                // –ï—Å–ª–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ .html, —ç—Ç–æ —Ñ–∞–π–ª, –ø—É—Ç—å '/partitures/' + id
                // –ù–æ id –≤ JSON –º–æ–∂–µ—Ç –±—ã—Ç—å 'liturgy/liturgy_of_the_faithful/some_file.html'
                // –ù—É–∂–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –æ—Ç –∫–æ—Ä–Ω—è —Å–∞–π—Ç–∞ –∫ —Ñ–∞–π–ª—É html
                linkPath = '/partitures/' + id;
            }

            const indent = level * 20;
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –ø–æ –Ω–∞–ª–∏—á–∏—é children –∏–ª–∏ –ø–æ id (–µ—Å–ª–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ .html)
            const isFolder = !id.endsWith('.html');
            const icon = isFolder ? 'üìÅ' : 'üìÑ';
            const color = isFolder ? '#e67e22' : '#2c3e50';
            const fontWeight = isFolder ? 'bold' : 'normal';

            html += `
                <li style="margin-bottom: 4px;">
                    <a href="${linkPath}" style="
                        color: ${color};
                        text-decoration: none;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                        padding: 6px 12px;
                        background: white;
                        border-radius: 5px;
                        border: 1px solid #e9ecef;
                        font-weight: ${fontWeight};
                        transition: all 0.2s;
                        margin-left: ${indent}px;
                    " onmouseover="this.style.backgroundColor='${isFolder ? '#fff3e0' : '#f8f9fa'}'; this.style.borderColor='${isFolder ? '#e67e22' : '#4051b5'}'"
                       onmouseout="this.style.backgroundColor='white'; this.style.borderColor='#e9ecef'">
                        ${icon} ${text} <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º text –≤–º–µ—Å—Ç–æ displayName -->
                    </a>
            `;

            if (children && children.length > 0) {
                html += '<ul style="list-style: none; padding-left: 0; margin: 0;">';
                renderItems(children, level + 1);
                html += '</ul>';
            }

            html += '</li>';
        });
    }

    renderItems(treeData);
    html += '</ul>';
    container.innerHTML = html;
}
</script>