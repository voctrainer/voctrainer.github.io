<ul style="list-style: none; padding-left: 0; margin: 0;">
    {% assign partiture_pages = site.pages | where: "nav", true | sort: "url" %}
    
    <!-- Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ğ³Ğ»Ğ°Ğ²Ğ½ÑƒÑ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ‚ÑƒÑ€ -->
    <li style="margin-bottom: 15px;">
        <a href="{{ '/partitures/' | relative_url }}" 
           class="nav-link {% if page.url == '/partitures/' %}active{% endif %}"
           style="color: {% if page.url == '/partitures/' %}#e74c3c{% else %}#3498db{% endif %}; 
                  font-weight: bold; 
                  display: block; 
                  padding: 8px 10px; 
                  background: {% if page.url == '/partitures/' %}#34495e{% else %}transparent{% endif %};
                  border-radius: 3px;
                  text-decoration: none;">
            ğŸ“ Ğ’ÑĞµ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ‚ÑƒÑ€Ñ‹
        </a>
    </li>
    
    <!-- Ğ Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ĞµĞ»ÑŒ -->
    <hr style="border: none; border-top: 1px solid #34495e; margin: 10px 0;">
    
    <!-- Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ‚ÑƒÑ€ Ğ¸ Ğ¿Ğ°Ğ¿Ğ¾Ğº -->
    {% for node in partiture_pages %}
        {% if node.url contains '/partitures/' and node.url != '/partitures/' %}
            {% assign depth = node.url | split: '/' | size | minus: 3 %}
            {% assign indent = depth | times: 15 %}
            
            <!-- ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼, ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ»Ğ¸ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚ Ğ¿Ğ°Ğ¿ĞºĞ¾Ğ¹ Ğ¸Ğ»Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ¼ -->
            {% assign is_folder = false %}
            {% unless node.url contains '.html' or node.url contains '.md' %}
                {% assign is_folder = true %}
            {% endunless %}
            
            <li style="margin-left: {{ indent }}px; margin-bottom: 8px;">
                {% if is_folder %}
                    <!-- ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ğ¿ĞºĞ¸ -->
                    <details {% if page.url contains node.url %}open{% endif %} style="margin: 5px 0;">
                        <summary style="color: #f39c12; 
                                      cursor: pointer; 
                                      font-weight: bold;
                                      padding: 5px 0;
                                      outline: none;">
                            ğŸ“ {{ node.title | default: node.name | replace: '_', ' ' | capitalize }}
                        </summary>
                        <!-- Ğ ĞµĞºÑƒÑ€ÑĞ¸Ğ²Ğ½Ğ¾ Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ°Ğ¿Ğ¾Ğº -->
                        {% include nav-tree.html path=node.url %}
                    </details>
                {% else %}
                    <!-- ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ° - Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾Ğµ Ğ¸Ğ¼Ñ Ñ„Ğ°Ğ¹Ğ»Ğ° -->
                    {% assign short_name = node.name | replace: '.md', '' | replace: '_', ' ' %}
                    <a href="{{ node.url | relative_url }}" 
                       class="file-link {% if page.url == node.url %}active{% endif %}"
                       style="color: {% if page.url == node.url %}#e74c3c{% else %}#ecf0f1{% endif %};
                              text-decoration: none;
                              display: block;
                              padding: 5px 10px;
                              margin: 2px 0;
                              border-radius: 3px;
                              background: {% if page.url == node.url %}#34495e{% else %}transparent{% endif %};
                              transition: background 0.2s;
                              font-size: 0.9em;">
                        ğŸ“„ {{ short_name }}
                    </a>
                {% endif %}
            </li>
        {% endif %}
    {% endfor %}
</ul>

<style>
    .file-link:hover {
        background: #34495e !important;
        color: #3498db !important;
    }
    
    details summary::-webkit-details-marker {
        display: none;
    }
    
    details summary {
        list-style: none;
    }
</style>
