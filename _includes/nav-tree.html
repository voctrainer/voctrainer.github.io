{% assign current_path = include.path %}
{% assign children = site.pages | where_exp: "item", "item.url contains current_path" | sort: "url" %}

<ul style="list-style: none; padding-left: 15px; margin: 5px 0; border-left: 1px solid #34495e;">
{% for child in children %}
    {% unless child.url == current_path %}
        {% assign child_depth = child.url | split: '/' | size %}
        {% assign base_depth = current_path | split: '/' | size %}
        
        {% if child_depth == base_depth | plus: 1 %}
            <li style="margin-bottom: 5px;">
                {% assign is_child_folder = false %}
                {% unless child.url contains '.html' or child.url contains '.md' %}
                    {% assign is_child_folder = true %}
                {% endunless %}
                
                {% if is_child_folder %}
                    <!-- Ğ’Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ğ°Ğ¿ĞºĞ° -->
                    <details {% if page.url contains child.url %}open{% endif %} style="margin: 3px 0;">
                        <summary style="color: #f39c12; 
                                      cursor: pointer; 
                                      font-weight: normal;
                                      padding: 3px 0;
                                      outline: none;">
                            ğŸ“ {{ child.title | default: child.name | replace: '_', ' ' | capitalize }}
                        </summary>
                        <!-- Ğ ĞµĞºÑƒÑ€ÑĞ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ² Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ°Ğ¿Ğ¾Ğº -->
                        {% include nav-tree.html path=child.url %}
                    </details>
                {% else %}
                    <!-- Ğ¤Ğ°Ğ¹Ğ» Ğ² Ğ¿Ğ°Ğ¿ĞºĞµ -->
                    <a href="{{ child.url | relative_url }}" 
                       class="file-link {% if page.url == child.url %}active{% endif %}"
                       style="color: {% if page.url == child.url %}#e74c3c{% else %}#ecf0f1{% endif %};
                              text-decoration: none;
                              display: block;
                              padding: 3px 8px;
                              margin: 1px 0;
                              border-radius: 3px;
                              background: {% if page.url == child.url %}#34495e{% else %}transparent{% endif %};
                              transition: background 0.2s;
                              font-size: 0.95em;">
                        ğŸ“„ {{ child.title | default: child.name | replace: '.md', '' | replace: '_', ' ' | capitalize }}
                    </a>
                {% endif %}
            </li>
        {% endif %}
    {% endunless %}
{% endfor %}
</ul>
