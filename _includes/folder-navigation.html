<div class="folder-navigation">
    <h3 style="margin: 0 0 15px 0; color: #2c3e50;">
        üìÅ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
    </h3>
    
    <div id="static-navigation">
        <div style="color: #7f8c8d; font-style: italic; padding: 20px; text-align: center;">
            –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏...
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    loadNavigation();
});

async function loadNavigation() {
    try {
        const currentPath = window.location.pathname;
        const navFile = currentPath + (currentPath.endsWith('/') ? '' : '/') + '_navigation.json';
        
        console.log('Loading navigation from:', navFile);
        
        const response = await fetch(navFile);
        if (!response.ok) throw new Error('Navigation file not found');
        
        const navData = await response.json();
        renderNavigation(navData, currentPath);
        
    } catch (error) {
        console.error('Error loading navigation:', error);
        document.getElementById('static-navigation').innerHTML = 
            '<div style="color: #7f8c8d; font-style: italic; padding: 20px; text-align: center;">–ü–∞–ø–∫–∞ –ø—É—Å—Ç–∞</div>';
    }
}

function renderNavigation(navData, currentPath) {
    let html = '<ul style="list-style: none; padding-left: 0; margin: 0;">';
    
    // –ü–∞–ø–∫–∏
    if (navData.folders && navData.folders.length > 0) {
        navData.folders.forEach(folder => {
            html += `
                <li style="margin-bottom: 8px;">
                    <a href="${currentPath}${folder.path}/" style="
                        color: #e67e22;
                        text-decoration: none;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                        padding: 8px 12px;
                        background: white;
                        border-radius: 5px;
                        border: 1px solid #e9ecef;
                        font-weight: bold;
                        transition: all 0.2s;
                    " onmouseover="this.style.backgroundColor='#fff3e0'; this.style.borderColor='#e67e22';"
                       onmouseout="this.style.backgroundColor='white'; this.style.borderColor='#e9ecef';">
                        üìÅ ${folder.displayName}
                    </a>
                </li>
            `;
        });
    }
    
    // –§–∞–π–ª—ã
    if (navData.files && navData.files.length > 0) {
        navData.files.forEach(file => {
            html += `
                <li style="margin-bottom: 8px;">
                    <a href="${currentPath}${file.path}" style="
                        color: #2c3e50;
                        text-decoration: none;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                        padding: 8px 12px;
                        background: white;
                        border-radius: 5px;
                        border: 1px solid #e9ecef;
                        transition: all 0.2s;
                    " onmouseover="this.style.backgroundColor='#f8f9fa'; this.style.borderColor='#4051b5';"
                       onmouseout="this.style.backgroundColor='white'; this.style.borderColor='#e9ecef';">
                        üìÑ ${file.displayName}
                    </a>
                </li>
            `;
        });
    }
    
    html += '</ul>';
    
    document.getElementById('static-navigation').innerHTML = html;
    
    // –ï—Å–ª–∏ –Ω–µ—Ç –Ω–∏ –ø–∞–ø–æ–∫, –Ω–∏ —Ñ–∞–π–ª–æ–≤
    if ((!navData.folders || navData.folders.length === 0) && 
        (!navData.files || navData.files.length === 0)) {
        document.getElementById('static-navigation').innerHTML = 
            '<div style="color: #7f8c8d; font-style: italic; padding: 20px; text-align: center;">–ü–∞–ø–∫–∞ –ø—É—Å—Ç–∞</div>';
    }
}
</script>
